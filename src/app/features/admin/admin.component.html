<div class="admin-dashboard" *ngIf="currentUser">
  <div class="container mt-4">
    <div class="dashboard-header mb-4">
      <h2 class="mb-3">Profil Administrateur</h2>
      
      <!-- User Profile Card -->
      <div class="card mb-4">
        <div class="card-header d-flex align-items-center">
          <div class="profile-avatar mr-3">
            <img src="https://static.vecteezy.com/system/resources/previews/000/439/863/original/vector-users-icon.jpg" alt="Admin Avatar" class="rounded-circle">
          </div>
          <div>
            <h3 class="card-title mb-1">{{ currentUser.firstName }} {{ currentUser.lastName }}</h3>
            <p class="text-muted mb-0">{{ currentUser.email }}</p>
          </div>
        </div>
        <div class="card-body">
          <table class="table">
            <tbody>
              <tr>
                <th>Nom d'utilisateur</th>
                <td>{{ currentUser.firstName }} {{ currentUser.lastName }}</td>
              </tr>
              <tr>
                <th>Email</th>
                <td>{{ currentUser.email }}</td>
              </tr>
              <tr>
                <th>Rôle</th>
                <td>{{ currentUser.role }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Statistics Section -->
      <div class="row">
        <!-- User Statistics Card -->
        <div class="col-md-4">
          <div class="card dashboard-card user-stats mb-3">
            <div class="card-body d-flex align-items-center">
              <div class="card-icon mr-3">
                <i class="fas fa-users fa-2x text-primary"></i>
              </div>
              <div>
                <h4 class="card-title mb-2">Total Utilisateurs</h4>
                <div class="card-number h3 mb-0">{{ totalUsers }}</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Announcement Statistics Card -->
        <div class="col-md-4">
          <div class="card dashboard-card announcement-stats mb-3">
            <div class="card-body d-flex align-items-center">
              <div class="card-icon mr-3">
                <i class="fas fa-bullhorn fa-2x text-success"></i>
              </div>
              <div>
                <h4 class="card-title mb-2">Total Annonces</h4>
                <div class="card-number h3 mb-0">
                  {{ announcementStatusData.available + announcementStatusData.notAvailable }}
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Quick Actions Card -->
        <div class="col-md-4">
          <div class="card dashboard-card quick-actions mb-3">
            <div class="card-body d-flex align-items-center">
              <div class="card-icon mr-3">
                <i class="fas fa-tools fa-2x text-warning"></i>
              </div>
              <div>
                <h4 class="card-title mb-2">Actions Rapides</h4>
                <div class="action-buttons">
                  <button class="btn btn-sm btn-primary mr-2">
                    <i class="fas fa-plus mr-1"></i> Créer
                  </button>
                  <button class="btn btn-sm btn-success">
                    <i class="fas fa-edit mr-1"></i> Modifier
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Charts Section -->
      <div class="row">
        <div class="col-md-6">
          <div class="card mb-3">
            <div class="card-header">
              <h3 class="card-title">Répartition des Utilisateurs</h3>
            </div>
            <div class="card-body">
              <canvas #userRoleChart></canvas>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card mb-3">
            <div class="card-header">
              <h3 class="card-title">Statut des Annonces</h3>
            </div>
            <div class="card-body">
              <canvas #announcementStatusChart></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Loading or No User Template -->
<div *ngIf="!currentUser" class="container text-center py-5">
  <div class="spinner-border text-primary" role="status">
    <span class="sr-only">Chargement...</span>
  </div>
  <p class="mt-3">Chargement du tableau de bord administrateur...</p>
</div>